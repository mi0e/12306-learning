## 数据库

### 为什么用户需要分三个表
因为做了分库分表，分片键是用户ID
。网站有三种登录方式，如果手机用户名ID
邮箱都存一个表时，非分片键去查询数据库会导致分库分表失效造成不必要地读扩散，所以另两个表是用来获取主表的分片键ID，从而通过回表查询用户信息。

### 订单分库分表
采用基因算法，将用户ID后6
位融入订单号中，方便该用户查找所有的订单。当用户通过完整用户ID和分片算法（模后6位），就可以在同一分片中找到所有订单，不会造成读扩散。

### 列车表
| 表名                       | 描述                                                    |
|--------------------------|---------------------------------------------------------|
| t_seat 座位表              | 余票对应的车次、座位类型、座位号、出发站、目标站、价格   |
| t_station 车站表           | 车站代码、名称、拼音、地区代码、地区名                  |
| t_train 列车表             | 列车号、列车类型、列车种类、列车可选座位、起点站、终点站、起点地名、终点地名 |
| t_train_station 列车站点表 | 通过列车ID关联，每一区间有单独ID，到站顺序通过序列号关联   |
| t_train_station_price 列车站点价格表 | -                                                 |
| t_train_station_relation 列车站点关系表 | -                                            |

